# Сервис для работы со счетами пользователей
Сервис реализован в рамках тестового задания на позицию стажера.

## Как запустить проект
1. Склонируйте репозиторий на свой компьютер.
2. Откройте терминал и корне проекта создайте виртуальное окружение.
3. Установите необходимые зависимости командой:
```python
pip install -r requirements.txt
```
4. Создайте базу данных Postgres, а затем в файл **config.py** внесите данные
созданной базы данных.
5. Создайте таблицы в базе данных из файла **createtb.sql**.
6. Запустите сервис командой:
```python
python3 -m src.server.server
```

## Тесты
Для сервиса написаны интерграционные тесты. Их можно запустить из IDE PyCharm.

## Методы
1. Старт. Подготовка сервиса к операциям со счетами пользователей. Метод заполняет таблицу type_transactions для работы с типами транзакций, а также создает 2 пользователей и счета для них.
```http
GET: /api/start/
```
2. Создание пользователя и счета для него. Вы можете создать нового пользователя для новых сценариев работы сервиса.
```http
POST: /api/create_user/
```
```json
{
  "first_name": "<Имя>",
  "last_name": "<Фамилия>",
  "email": "<Электронная почта>"
}
```
3. Просмотр всех пользователей. Вы можете просмотреть данные пользователей, чтобы корректно отправить запрос.
```http
GET: /api/show_all_users/
```
4. Зачисление средств. Вы можете пополнить счет пользователя, отправив POST-запрос с JSON-файлом.
```http
POST: /api/money_transfer/
```
```json
{
  "action": "money_transfer",
  "id": "<id пользователя>",
  "amount_money": "<Сумма зачисления>"
}
```
**action** - Тип операции, с помощью которого, достаю id из таблицы type_transactions

5. Списание средств. Вы можете списать средства со счета пользователя, отправив POST-запрос с JSON-файлом.
```http
POST: /api/write_off_money/
```
```json
{
  "action": "write_off_money",
  "id": "<id пользователя>",
  "amount_money": "<Сумма списания>"
}
```
**action** - Тип операции, с помощью которого, достаю id из таблицы type_transactions

6. Перевод средств. Вы можете совершить перевод средств с одного счет на другой, отправив POST-запрос с JSON-файлом.
```http
POST: /api/money_transaction/
```
```json
{
  "action": "money_transaction",
  "id_from": "<id пользователя списания>",
  "id_to": "<id пользователя зачисления>",
  "amount_money": "<Сумма перевода>"
}
```
**action** - Тип операции, с помощью которого, достаю id из таблицы type_transactions\
**id_from** - id пользователя у которого будут списываться средства\
**id_to** - id пользователя, которому будут зачислены средства

7. Просмотр баланса. Вы можете узнать баланс пользователя, отправив POST-запрос с JSON-файлом.
```http
POST: /api/show_balance/
```
```json
{
    "id": "<id пользователя>"
}
```
```json
{
    "id": "<id пользователя>",
    "currency": "<Валюта>"
}

```
**currency** - Указывается опционально, если необходимо вывести баланс в другой валюте.

8. Просмотр истории транзакций пользователя. Вы можете просмотреть все транзакции пользователя, отправив POST-запрос с JSON-файлом.
```http
POST: /api/history_transactions/
```
```json
{
  "id": "<id пользователя>"
}

```


